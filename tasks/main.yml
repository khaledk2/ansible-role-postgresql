---
- name: postgres | Include ome.postgresql_client role
  ansible.builtin.import_role:
    name: ome.postgresql_client

# tasks file for ome.postgresql
- name: postgres | fail if postgresql_users_databases defined
  ansible.builtin.fail:
    msg: >
      Variable 'postgresql_users_databases' has been replaced by
      'postgresql_databases' and 'postgresql_users'
  when: "postgresql_users_databases | default(False)"

- name: postgres | fail if postgresql_install_server true
  ansible.builtin.fail:
    msg: >
      Variable 'postgresql_install_server=false' has been replaced by the
      'ome.postgresql_client' role
  when: "not (postgresql_install_server | default(True))"

- ansible.builtin.include_tasks: redhat.yml
  when: ansible_os_family | lower == 'redhat'

- ansible.builtin.include_tasks: debian.yml
  when: ansible_os_family | lower == 'debian'

- ansible.builtin.import_tasks: initialise.yml

- ansible.builtin.import_tasks: databases.yml
